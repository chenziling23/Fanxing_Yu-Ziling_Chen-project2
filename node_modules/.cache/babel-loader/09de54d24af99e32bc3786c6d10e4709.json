{"ast":null,"code":"const defaultBoard = [];\nconst direction = [\"v\", \"h\"];\n\nfor (let i = 0; i < 10; i++) {\n  defaultBoard.push([]);\n\n  for (let j = 0; j < 10; j++) {\n    defaultBoard[i].push(\"no\");\n  }\n} //Random Place\n\n\nfunction randomSelect() {\n  let startX = Math.floor(Math.random() * 10);\n  let startY = Math.floor(Math.random() * 10);\n  let dir = Math.floor(Math.random() * 2);\n  return [startX, startY, dir];\n} //check right\n\n\nfunction checkRight(shipLen, x, y) {\n  for (let i = 0; i < shipLen; i++) {\n    if (y + i < 0 || y + i > 9 || defaultBoard[x][y + i] === \"yes\") {\n      return false;\n    }\n  }\n\n  return true;\n} //check left\n\n\nfunction checkLeft(shipLen, x, y) {\n  for (let i = 0; i < shipLen; i++) {\n    if (y - i < 0 || y - i > 9 || defaultBoard[x][y - i] === \"yes\") {\n      return false;\n    }\n  }\n\n  return true;\n} //check up\n\n\nfunction checkUp(shipLen, x, y) {\n  for (let i = 0; i < shipLen; i++) {\n    if (x - i < 0 || x - i > 9 || defaultBoard[x - i][y] === \"yes\") {\n      return false;\n    }\n  }\n\n  return true;\n} //check down\n\n\nfunction checkDown(shipLen, x, y) {\n  for (let i = 0; i < shipLen; i++) {\n    if (x + i < 0 || x + i > 9 || defaultBoard[x + i][y] === \"yes\") {\n      return false;\n    }\n  }\n\n  return true;\n} //5*1\n\n\nfunction placeShip(shipLen) {\n  let [x, y, dir] = randomSelect();\n\n  while (defaultBoard[x][y] === \"yes\" || !checkDown(shipLen, x, y) && !checkUp(shipLen, x, y) && !checkRight(shipLen, x, y) && !checkLeft(shipLen, x, y)) {\n    [x, y, dir] = randomSelect();\n  }\n\n  if (direction[dir] === \"v\" && !checkDown(shipLen, x, y) && !checkUp(shipLen, x, y) || direction[dir] === \"h\" && (checkLeft(shipLen, x, y) || checkRight(shipLen, x, y))) {\n    if (checkLeft(shipLen, x, y)) {\n      for (let i = 0; i < shipLen; i++) {\n        console.log(\"1\");\n        defaultBoard[x][y - i] = \"yes\";\n      }\n    } else {\n      for (let i = 0; i < shipLen; i++) {\n        defaultBoard[x][y + i] = \"yes\";\n      }\n    }\n  } else {\n    if (checkDown(shipLen, x, y)) {\n      for (let i = 0; i < shipLen; i++) {\n        defaultBoard[x + i][y] = \"yes\";\n      }\n    } else {\n      for (let i = 0; i < shipLen; i++) {\n        defaultBoard[x - i][y] = \"yes\";\n      }\n    }\n  }\n} //place\n\n\nplaceShip(5);\nplaceShip(4);\nplaceShip(3);\nplaceShip(3);\nplaceShip(2);\nconsole.log(defaultBoard);\nconst defaultState = {\n  symbol: \"\",\n  board: defaultBoard\n};\n\nfunction generateGameBoard() {\n  return defaultState.board;\n}\n\nfunction exists(arr) {\n  for (let i = 0; i < arr.length; i++) {\n    for (let j = 0; j < 10; j++) {\n      if (arr[i][j] === \"yes\") {\n        return false;\n      }\n    }\n  }\n\n  return true;\n}\n\nexport default function boardReducer(state, action) {\n  if (state === undefined) {\n    return generateGameBoard();\n  }\n\n  if (action.type === \"boardClick\") {\n    const value = state[action.x][action.y];\n\n    if (value === \"yes\") {\n      state[action.x][action.y] = \"Y\";\n    } else if (value === \"no\") {\n      state[action.x][action.y] = \"X\";\n    }\n\n    if (exists(state)) {\n      alert(\"you win!\");\n    }\n\n    ;\n    return [...state];\n  }\n\n  if (action.type === \"reset\") {\n    for (let i = 0; i < state.length; i++) {\n      for (let j = 0; j < state.length; j++) {\n        state[i][j] = 'no';\n      }\n    }\n\n    placeShip(5);\n    placeShip(4);\n    placeShip(3);\n    placeShip(3);\n    placeShip(2);\n    return [...state];\n  }\n\n  return state;\n}","map":{"version":3,"sources":["/Users/yuyuyuyu/Desktop/web/battleship-app/src/reducers/boardReducer.js"],"names":["defaultBoard","direction","i","push","j","randomSelect","startX","Math","floor","random","startY","dir","checkRight","shipLen","x","y","checkLeft","checkUp","checkDown","placeShip","console","log","defaultState","symbol","board","generateGameBoard","exists","arr","length","boardReducer","state","action","undefined","type","value","alert"],"mappings":"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","sourcesContent":["const defaultBoard = [];\nconst direction = [\"v\",\"h\"]\nfor(let i = 0; i < 10; i++) {\n    defaultBoard.push([])\n    for(let j = 0; j < 10; j++){\n        defaultBoard[i].push(\"no\");\n    }\n}\n\n//Random Place\nfunction randomSelect() {\n    let startX = Math.floor(Math.random()*10);\n    let startY = Math.floor(Math.random()*10);\n    let dir = Math.floor(Math.random()*2);\n    return [startX,startY,dir];\n}\n\n\n//check right\nfunction checkRight(shipLen,x,y) {\n    for (let i = 0; i < shipLen; i++){\n        if (y+i < 0 || y+i > 9 || defaultBoard[x][y+i] === \"yes\"){\n            return false;\n        }\n    }\n    return true;\n}\n//check left\nfunction checkLeft(shipLen,x,y) {\n    for (let i = 0; i < shipLen; i++){\n        if (y-i < 0 || y-i > 9 || defaultBoard[x][y-i] === \"yes\"){\n            return false;\n        }\n    }\n    return true;\n}\n//check up\nfunction checkUp(shipLen,x,y) {\n    for (let i = 0; i < shipLen; i++){\n        if (x-i < 0 || x-i > 9 || defaultBoard[x-i][y] === \"yes\"){\n            return false;\n        }\n    }\n    return true;\n}\n//check down\nfunction checkDown(shipLen,x,y) {\n    for (let i = 0; i < shipLen; i++){\n        if (x+i < 0 || x+i > 9 || defaultBoard[x+i][y] === \"yes\"){\n            return false;\n        }\n    }\n    return true;\n}\n\n//5*1\nfunction placeShip(shipLen){\n    let [x,y,dir] = randomSelect();\n\n    while (defaultBoard[x][y] === \"yes\" || (!checkDown(shipLen,x,y) && !checkUp(shipLen,x,y) && !checkRight(shipLen,x,y) && !checkLeft(shipLen,x,y))) {\n        [x,y,dir] = randomSelect();\n    }\n\n    if ((direction[dir] === \"v\" && !checkDown(shipLen,x,y) && !checkUp(shipLen,x,y)) || (direction[dir] ===\"h\" && (checkLeft(shipLen,x,y)||checkRight(shipLen,x,y)))) {\n        if(checkLeft(shipLen,x,y)){\n            for(let i = 0; i < shipLen; i++){\n                console.log(\"1\");\n                defaultBoard[x][y-i] = \"yes\";\n            }\n        }else {\n            for(let i = 0; i < shipLen; i++){\n                defaultBoard[x][y+i] = \"yes\";\n            }\n        }\n    }else{\n        if(checkDown(shipLen,x,y)){\n            for(let i = 0; i < shipLen; i++){\n                defaultBoard[x+i][y] = \"yes\";\n            }\n        }else{\n            for(let i = 0; i < shipLen; i++){\n                defaultBoard[x-i][y] = \"yes\";\n            }\n        }\n    }\n}\n\n//place\nplaceShip(5)\nplaceShip(4)\nplaceShip(3)\nplaceShip(3)\nplaceShip(2)\n\nconsole.log(defaultBoard)\n\nconst defaultState = {\n    symbol: \"\",\n    board:defaultBoard\n}\n\nfunction generateGameBoard() {\n    return defaultState.board;\n}\n\n\nfunction exists(arr) {\n    for (let i = 0; i < arr.length; i++) {\n        for(let j = 0; j < 10; j++){\n            if (arr[i][j] === \"yes\"){\n                return false;\n            }\n        }\n    }\n    return true;\n}\n\nexport default function boardReducer (state, action){\n    if (state === undefined) {\n        return generateGameBoard();\n    }\n    if(action.type === \"boardClick\") {\n        const value = state[action.x][action.y];\n        if (value === \"yes\") {\n            state[action.x][action.y] = \"Y\";\n        }else if (value === \"no\") {\n            state[action.x][action.y] = \"X\";\n        }\n        if (exists(state)){\n            alert(\"you win!\");\n        };\n        return [...state];\n    }\n    if(action.type === \"reset\") {\n        for (let i = 0; i < state.length; i++) {\n            for (let j = 0; j < state.length; j++){\n                state[i][j] = 'no';\n            }\n        }\n        placeShip(5)\n        placeShip(4)\n        placeShip(3)\n        placeShip(3)\n        placeShip(2)\n        return [...state];\n    }\n    return state;\n}"]},"metadata":{},"sourceType":"module"}