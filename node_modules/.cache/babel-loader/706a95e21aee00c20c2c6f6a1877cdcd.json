{"ast":null,"code":"const defaultBoard = [];\nconst direction = [\"v\", \"h\"];\n\nfor (let i = 0; i < 10; i++) {\n  defaultBoard.push([]);\n\n  for (let j = 0; j < 10; j++) {\n    defaultBoard[i].push(\"no\");\n  }\n} //Random Place\n\n\nfunction randomSelect() {\n  let startX = Math.floor(Math.random() * 10);\n  let startY = Math.floor(Math.random() * 10);\n  let dir = Math.floor(Math.random() * 2);\n  return [startX, startY, dir];\n} //check right\n\n\nfunction checkRight(shipLen, x, y) {\n  for (let i = 1; i < shipLen + 1; i++) {\n    if (x + i < 0 || x + i > 9 || defaultBoard[x + i][y] === \"yes\") {\n      return false;\n    }\n  }\n\n  return true;\n} //check left\n\n\nfunction checkLeft(shipLen, x, y) {\n  for (let i = 1; i < shipLen + 1; i++) {\n    if (x - i < 0 || x - i > 9 || defaultBoard[x - i][y] === \"yes\") {\n      return false;\n    }\n  }\n\n  return true;\n} //check up\n\n\nfunction checkUp(shipLen, x, y) {\n  for (let i = 1; i < shipLen + 1; i++) {\n    if (y + i < 0 || y + i > 9 || defaultBoard[x][y + i] === \"yes\") {\n      return false;\n    }\n  }\n\n  return true;\n} //check down\n\n\nfunction checkDown(shipLen, x, y) {\n  for (let i = 1; i < shipLen + 1; i++) {\n    if (y - i < 0 || y - i > 9 || defaultBoard[x][y - i] === \"yes\") {\n      return false;\n    }\n  }\n\n  return true;\n} //5*1\n\n\nlet [x, y, dir] = randomSelect();\n\nwhile (defaultBoard[x][y] === \"yes\" || !checkDown(5, x, y) && !checkUp(5, x, y) && !checkRight(5, x, y) && !checkLeft(5, x, y)) {\n  [x, y, dir] = randomSelect();\n}\n\nif (direction[dir] === \"v\" && !checkDown(5, x, y) && !checkUp(5, x, y)) {\n  if (!checkLeft(5, x, y)) {\n    for (let i = 1; i < 5 + 1; i++) {\n      defaultBoard[x - i][y] = \"yes\";\n    }\n  }\n}\n\nconst defaultState = {\n  symbol: \"\",\n  board: defaultBoard\n};\n\nfunction generateGameBoard() {\n  return defaultState.board;\n}\n\nfunction exists(arr) {\n  for (let i = 0; i < arr.length; i++) {\n    for (let j = 0; j < 10; j++) {\n      if (arr[i][j] === \"yes\") {\n        return false;\n      }\n    }\n  }\n\n  return true;\n}\n\nfunction check(x, y, arr) {\n  if (arr[x][y] === \"X\" || arr[x][y] === \"Y\") {\n    return false;\n  }\n\n  return true;\n}\n\nexport default function boardReducer(state, action) {\n  if (state === undefined) {\n    return generateGameBoard();\n  }\n\n  if (action.type === \"boardClick\") {\n    let x = Math.floor(Math.random() * 9);\n    let y = Math.floor(Math.random() * 9);\n\n    while (!check(x, y, state)) {\n      x = Math.floor(Math.random() * 9);\n      y = Math.floor(Math.random() * 9);\n    }\n\n    const value = state[x][y];\n\n    if (value === \"yes\") {\n      state[x][y] = \"Y\";\n    } else if (value === \"no\") {\n      state[x][y] = \"X\";\n    }\n\n    if (exists(state)) {\n      alert(\"ai win!\");\n    }\n\n    ;\n    return [...state];\n  }\n\n  if (action.type === \"reset\") {\n    for (let i = 0; i < state.length; i++) {\n      for (let j = 0; j < state.length; j++) {\n        if (j === 2) {\n          state[i][j] = 'yes';\n        } else {\n          state[i][j] = 'no';\n        }\n      }\n    }\n\n    return [...state];\n  }\n\n  return state;\n}","map":{"version":3,"sources":["/Users/yuyuyuyu/Desktop/web/battleship-app/src/reducers/userReducer.js"],"names":["defaultBoard","direction","i","push","j","randomSelect","startX","Math","floor","random","startY","dir","checkRight","shipLen","x","y","checkLeft","checkUp","checkDown","defaultState","symbol","board","generateGameBoard","exists","arr","length","check","boardReducer","state","action","undefined","type","value","alert"],"mappings":"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","sourcesContent":["const defaultBoard = [];\nconst direction = [\"v\",\"h\"]\nfor(let i = 0; i < 10; i++) {\n    defaultBoard.push([])\n    for(let j = 0; j < 10; j++){\n        defaultBoard[i].push(\"no\");\n    }\n}\n\n//Random Place\nfunction randomSelect() {\n    let startX = Math.floor(Math.random()*10)\n    let startY = Math.floor(Math.random()*10)\n    let dir = Math.floor(Math.random()*2)\n    return [startX,startY,dir];\n}\n\n\n//check right\nfunction checkRight(shipLen,x,y) {\n    for (let i = 1; i < shipLen+1; i++){\n        if (x+i < 0 || x+i > 9 || defaultBoard[x+i][y] === \"yes\"){\n            return false;\n        }\n    }\n    return true;\n}\n//check left\nfunction checkLeft(shipLen,x,y) {\n    for (let i = 1; i < shipLen+1; i++){\n        if (x-i < 0 || x-i > 9 || defaultBoard[x-i][y] === \"yes\"){\n            return false;\n        }\n    }\n    return true;\n}\n//check up\nfunction checkUp(shipLen,x,y) {\n    for (let i = 1; i < shipLen+1; i++){\n        if (y+i < 0 || y+i > 9 || defaultBoard[x][y+i] === \"yes\"){\n            return false;\n        }\n    }\n    return true;\n}\n//check down\nfunction checkDown(shipLen,x,y) {\n    for (let i = 1; i < shipLen+1; i++){\n        if (y-i < 0 || y-i > 9 || defaultBoard[x][y-i] === \"yes\"){\n            return false;\n        }\n    }\n    return true;\n}\n\n//5*1\nlet [x,y,dir] = randomSelect();\nwhile (defaultBoard[x][y] === \"yes\" || (!checkDown(5,x,y) && !checkUp(5,x,y) && !checkRight(5,x,y) && !checkLeft(5,x,y))) {\n    [x,y,dir] = randomSelect();\n}\nif (direction[dir] === \"v\" && !checkDown(5,x,y) && !checkUp(5,x,y)) {\n    if(!checkLeft(5,x,y)){\n        for(let i = 1; i < 5+1; i++){\n            defaultBoard[x-i][y] = \"yes\";\n        }\n    }\n}\nconst defaultState = {\n    symbol: \"\",\n    board:defaultBoard\n}\n\nfunction generateGameBoard() {\n    return defaultState.board;\n}\n\nfunction exists(arr) {\n    for (let i = 0; i < arr.length; i++) {\n        for(let j = 0; j < 10; j++){\n            if (arr[i][j] === \"yes\"){\n                return false;\n            }\n        }\n    }\n    return true;\n}\n\nfunction check(x,y,arr){\n    if (arr[x][y] === \"X\" || arr[x][y] === \"Y\"){\n        return false;\n    }\n    return true;\n}\n\nexport default function boardReducer (state, action){\n    if (state === undefined) {\n        return generateGameBoard();\n    }\n    if (action.type === \"boardClick\") {\n        let x = Math.floor(Math.random()*9);\n        let y = Math.floor(Math.random()*9);\n        while (!check(x,y,state)){\n            x = Math.floor(Math.random()*9);\n            y = Math.floor(Math.random()*9);\n        }\n        const value = state[x][y];\n        if (value === \"yes\") {\n            state[x][y] = \"Y\";\n        }else if (value === \"no\") {\n            state[x][y] = \"X\";\n        }\n        if (exists(state)){\n            alert(\"ai win!\");\n        };\n        return [...state];\n    }\n    if(action.type === \"reset\") {\n        for (let i = 0; i < state.length; i++) {\n            for (let j = 0; j < state.length; j++){\n                if (j === 2){\n                    state[i][j] = 'yes';\n                }else{\n                    state[i][j] = 'no';\n                }\n            }\n        }\n        return [...state];\n    }\n    return state;\n}"]},"metadata":{},"sourceType":"module"}